{"version":3,"sources":["logo.svg","service/timeString.js","service/btnStates.js","App.js","index.js"],"names":["getTimeString","time","pad","number","String","padStart","Math","floor","btn","start","stop","pause","App","useState","timerTime","setTimerTime","startTime","setStartTime","btnState","setBtnState","button","useRef","useEffect","subscriber","interval","subscribe","Date","now","unsubscribe","clickStream","fromEvent","current","pipe","buffer","debounceTime","filter","length","className","src","logo","alt","onClick","currentTime","console","log","handleClickStart","ref","href","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0OAAe,MAA0B,iC,MCA1B,SAASA,EAAcC,GACpC,IAAMC,EAAM,SAAAC,GAAM,OAAIC,OAAOD,GAAQE,SAAS,EAAG,MAQjD,MAAM,GAAN,OALEH,EAAII,KAAKC,MAAON,EAAI,MAAL,OAKjB,cAHEC,EAAII,KAAKC,MAAON,EAAI,KAAL,MAGjB,cAFyBC,EAAII,KAAKC,MAAON,EAAI,IAAkB,OCPjE,IAMeO,EANH,CACVC,MAAO,QACPC,KAAM,OACNC,MAAO,S,wCCkGMC,MA7Ff,WAAgB,IAAD,EACqBC,mBAAS,GAD9B,mBACNC,EADM,KACKC,EADL,OAEqBF,mBAAS,GAF9B,mBAENG,EAFM,KAEKC,EAFL,OAImBJ,mBAASL,EAAIE,MAJhC,mBAINQ,EAJM,KAIIC,EAJJ,KAKPC,EAASC,iBAAO,MAqDtB,OAnDAC,qBAAU,WACR,IAAMC,EAAaC,YAAS,KAAKC,WAAU,WACrCP,IAAaV,EAAIC,OACnBM,EAAaW,KAAKC,MAAQX,MAG9B,OAAO,kBAAMO,EAAWK,iBACvB,CAACV,EAAUF,IAEdM,qBAAU,WACR,IAAMO,EAAcC,YAAUV,EAAOW,QAAS,SACxCR,EAAaM,EAChBG,KACCC,YAAOJ,EAAYG,KAAKE,YAAa,OACrCC,aAAO,mBAA2B,IAA3B,EAAGC,WAEXX,WAAU,WACLP,IAAaV,EAAIC,OACnBU,EAAYX,EAAIG,UAItB,OAAO,WACLY,EAAWK,iBAEZ,CAACV,EAAUF,IA2BZ,sBAAKqB,UAAU,MAAf,UACE,wBAAQA,UAAU,aAAlB,SACE,qBAAKC,IAAKC,EAAMF,UAAU,WAAWG,IAAI,WAE3C,+BACE,sBAAKH,UAAU,UAAf,UACE,oBAAIA,UAAU,QAAd,uBACA,mBAAGA,UAAU,QAAb,SAAsBrC,EAAcc,KACpC,wBAAQuB,UAAU,SAASI,QAAS,kBAjCnB,WACvB,OAAQvB,GACN,KAAKV,EAAIE,KACPO,EAAaS,KAAKC,MAAQb,GAC1BK,EAAYX,EAAIC,OAChB,MAEF,KAAKD,EAAIG,MACP,IAAM+B,EAAchB,KAAKC,MAEzBV,EAAaD,GADO0B,EAAc1B,EAAYF,IAE9CK,EAAYX,EAAIC,OAChB,MAEF,KAAKD,EAAIC,MACPM,EAAa,GACbI,EAAYX,EAAIE,MAChB,MAEF,QACEiC,QAAQC,IAAI,UAagCC,IAA1C,wBAGA,wBAAQR,UAAU,SAASS,IAAK1B,EAAhC,kBAGA,wBACEiB,UAAU,SACVI,QAAS,WACP1B,EAAa,GACbE,EAAaS,KAAKC,QAJtB,wBAWJ,wBAAQU,UAAU,iBAAlB,SACE,mBAAGA,UAAU,aAAaU,KAAK,8BAA/B,+BCxFRC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.f0a6c8d4.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","export default function getTimeString(time) {\r\n  const pad = number => String(number).padStart(2, '0');\r\n\r\n  const getHours = () =>\r\n    pad(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\r\n  const getMinutes = () =>\r\n    pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\r\n  const getSeconds = () => pad(Math.floor((time % (1000 * 60)) / 1000));\r\n\r\n  return `${getHours()} : ${getMinutes()} : ${getSeconds()}`;\r\n}\r\n","const btn = {\r\n  start: 'START',\r\n  stop: 'STOP',\r\n  pause: 'PAUSE',\r\n};\r\n\r\nexport default btn;\r\n","import logo from './logo.svg';\r\nimport './App.css';\r\nimport getTimeString from './service/timeString';\r\nimport btn from './service/btnStates';\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { debounceTime, buffer, filter } from 'rxjs/operators';\r\nimport { fromEvent, interval } from 'rxjs';\r\n\r\nfunction App() {\r\n  const [timerTime, setTimerTime] = useState(0);\r\n  const [startTime, setStartTime] = useState(0);\r\n\r\n  const [btnState, setBtnState] = useState(btn.stop);\r\n  const button = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const subscriber = interval(100).subscribe(() => {\r\n      if (btnState === btn.start) {\r\n        setTimerTime(Date.now() - startTime);\r\n      }\r\n    });\r\n    return () => subscriber.unsubscribe();\r\n  }, [btnState, startTime]);\r\n\r\n  useEffect(() => {\r\n    const clickStream = fromEvent(button.current, 'click');\r\n    const subscriber = clickStream\r\n      .pipe(\r\n        buffer(clickStream.pipe(debounceTime(300))),\r\n        filter(({ length }) => length === 2),\r\n      )\r\n      .subscribe(() => {\r\n        if (btnState === btn.start) {\r\n          setBtnState(btn.pause);\r\n        }\r\n      });\r\n\r\n    return () => {\r\n      subscriber.unsubscribe();\r\n    };\r\n  }, [btnState, startTime]);\r\n\r\n  const handleClickStart = () => {\r\n    switch (btnState) {\r\n      case btn.stop:\r\n        setStartTime(Date.now() + timerTime);\r\n        setBtnState(btn.start);\r\n        break;\r\n\r\n      case btn.pause:\r\n        const currentTime = Date.now();\r\n        const timeBetween = currentTime - startTime - timerTime;\r\n        setStartTime(startTime + timeBetween);\r\n        setBtnState(btn.start);\r\n        break;\r\n\r\n      case btn.start:\r\n        setTimerTime(0);\r\n        setBtnState(btn.stop);\r\n        break;\r\n\r\n      default:\r\n        console.log('error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"App\">\r\n      <header className=\"App-header\">\r\n        <img src={logo} className=\"App-logo\" alt=\"logo\" />\r\n      </header>\r\n      <main>\r\n        <div className=\"wrapper\">\r\n          <h1 className=\"title\">Stopwatch</h1>\r\n          <p className=\"timer\">{getTimeString(timerTime)}</p>\r\n          <button className=\"button\" onClick={() => handleClickStart()}>\r\n            Start/Stop\r\n          </button>\r\n          <button className=\"button\" ref={button}>\r\n            Wait\r\n          </button>\r\n          <button\r\n            className=\"button\"\r\n            onClick={() => {\r\n              setTimerTime(0);\r\n              setStartTime(Date.now());\r\n            }}\r\n          >\r\n            Reset\r\n          </button>\r\n        </div>\r\n      </main>\r\n      <footer className=\"footterWrapper\">\r\n        <a className=\"githubLink\" href=\"https://github.com/VollyKor\">\r\n          GitHub Link\r\n        </a>\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n\r\n"],"sourceRoot":""}